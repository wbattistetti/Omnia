<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <LangVersion>latest</LangVersion>
    <OptionStrict>On</OptionStrict>
    <OptionExplicit>On</OptionExplicit>
    <EnableDefaultCompileItems>false</EnableDefaultCompileItems>
    <RootNamespace>Compiler</RootNamespace>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <DebugType>full</DebugType>
    <DebugSymbols>true</DebugSymbols>
    <Optimize>false</Optimize>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="..\DDTEngine\DDTEngine.vbproj" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Newtonsoft.Json" Version="13.0.3" />
  </ItemGroup>

  <ItemGroup>
    <!-- DDT Compiler e Assembler -->
    <Compile Include="DDTCompiler.vb" />
    <Compile Include="DDTAssembler.vb" />
    <Compile Include="ContractLoader.vb" />

    <!-- Task Compiler (Polymorphic) -->
    <Compile Include="TaskCompiler\TaskCompilerBase.vb" />
    <Compile Include="TaskCompiler\UtteranceInterpretationTaskCompiler.vb" />
    <Compile Include="TaskCompiler\SimpleTaskCompiler.vb" />
    <Compile Include="TaskCompiler\TaskCompilerFactory.vb" />

    <!-- Flow Compiler -->
    <Compile Include="FlowCompiler.vb" />
    <Compile Include="ConditionBuilder.vb" />
    <Compile Include="Flow.vb" />
    <Compile Include="FlowUtils.vb" />

    <!-- IDE Types (Input from React/TypeScript) - Flow -->
    <Compile Include="DTO\IDE\FlowNode.vb" />
    <Compile Include="DTO\IDE\FlowEdge.vb" />
    <!-- NodeData.vb removed - FlowNode now has Label and Rows directly -->
    <Compile Include="DTO\IDE\TaskRow.vb" />
    <Compile Include="DTO\IDE\EdgeData.vb" />
    <Compile Include="DTO\IDE\Task.vb" />
    <!-- TaskTypeConverter.vb (renamed from ActionTypeConverter) - kept for backward compatibility, not actively used -->

    <!-- IDE Types (Input from React/TypeScript) - DDT -->
    <Compile Include="DTO\IDE\TaskParameter.vb" />
    <!-- Action.vb removed - using Task.vb instead -->
    <Compile Include="DTO\IDE\Escalation.vb" />
    <Compile Include="DTO\IDE\DialogueStep.vb" />
    <Compile Include="DTO\IDE\DialogueStepListConverter.vb" />
    <Compile Include="DTO\IDE\MainDataNode.vb" />
    <Compile Include="DTO\IDE\MainDataNodeListConverter.vb" />
    <Compile Include="DTO\IDE\TaskTreeRuntime.vb" />
    <!-- âŒ RIMOSSO: AssembledDDT.vb - rinominato in TaskTreeRuntime.vb -->

    <!-- Runtime Types (Output for execution) -->
    <Compile Include="DTO\Runtime\TaskState.vb" />
    <Compile Include="DTO\Runtime\Condition.vb" />
    <Compile Include="DTO\Runtime\TaskSourceType.vb" />
    <Compile Include="DTO\Runtime\TaskDebugInfo.vb" />
    <Compile Include="DTO\Runtime\TaskTypesConverter.vb" />
    <Compile Include="DTO\Runtime\Task.vb" />
    <Compile Include="DTO\Runtime\CompiledTask.vb" />
    <Compile Include="DTO\Runtime\CompiledTaskConverter.vb" />
    <Compile Include="DTO\Runtime\CompiledTaskListConverter.vb" />
    <Compile Include="DTO\Runtime\FlowCompilationResult.vb" />
    <Compile Include="DTO\Runtime\TaskGroup.vb" />
    <Compile Include="DTO\Runtime\Utils.vb" />
  </ItemGroup>

</Project>
