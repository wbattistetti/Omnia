  const makeRowId = React.useCallback(() => `${id}-${newUid()}`, [id]);

  // âœ… NUOVO: Metodo per aggiungere una riga vuota
  const appendEmptyRow = React.useCallback(() => {
    const newRowId = makeRowId();
    const newRows = [...nodeRows, {
      id: newRowId,
      text: '',
      included: true,
      mode: 'Message' as const
    } as any];
    setNodeRows(newRows);
    setEditingRowId(newRowId);
    data.onUpdate?.({ rows: newRows });
  }, [nodeRows, makeRowId, data]);
